<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="NanoBanana - ä¸Šä¼ å›¾ç‰‡ï¼Œæ–½å±• AI é­”æ³•ï¼Œåˆ›é€ ç²¾ç¾æ‰‹åŠé£æ ¼æˆ–æ·±å¤œé£Ÿå ‚æ°›å›´å›¾ã€‚">
  <meta name="keywords" content="NanoBanana, AI ç”»å›¾, å›¾ç‰‡ç”Ÿæˆ, Gemini, OpenRouter, æ‰‹åŠé£æ ¼, æ·±å¤œé£Ÿå ‚">
  <title>NanoBanana - é‚“å®‰è‰¯</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/assets/images/favicon.png">

  <!-- Stylesheets -->
  <link rel="stylesheet" href="/assets/css/themes.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/components.css">

  <!-- Tailwind CDN for NanoBanana Styles -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      corePlugins: {
        preflight: false,
      }
    }
  </script>

  <!-- Alternate language -->
  <link rel="alternate" hreflang="en" href="/en/tools/nano-banana.html">
  <link rel="alternate" hreflang="zh" href="/tools/nano-banana.html">

  <style>
    /* Reset some conflicts between blog CSS and Tailwind */
    .nano-banana-app button { text-transform: none; }
    .nano-banana-app select { background-image: none; }
    .nano-banana-app textarea { color: #1a202c; }
    .nano-banana-app input { color: #1a202c; }

    [data-theme="dark"] .nano-banana-app .bg-white { background-color: #ffffff !important; color: #1a202c !important; }
    [data-theme="dark"] .nano-banana-app .text-gray-900 { color: #1a202c !important; }
    [data-theme="dark"] .nano-banana-app .text-gray-800 { color: #1a202c !important; }
    [data-theme="dark"] .nano-banana-app .text-gray-600 { color: #4a5568 !important; }
    [data-theme="dark"] .nano-banana-app .bg-gray-50 { background-color: #f7fafc !important; }
    [data-theme="dark"] .nano-banana-app .bg-gray-100 { background-color: #edf2f7 !important; }

    .animate-spin { animation: spin 1s linear infinite; }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

    .breadcrumb { margin-bottom: 1rem; }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="navbar-content">
      <a href="/" class="navbar-logo">é‚“å®‰è‰¯</a>
      <ul class="navbar-menu">
        <li><a href="/">é¦–é¡µ</a></li>
        <li><a href="/tools/">å·¥å…·</a></li>
      </ul>
      <div class="navbar-actions">
        <button class="lang-toggle">English</button>
        <button class="theme-toggle"></button>
      </div>
    </div>
  </nav>

  <main class="main-content">
    <div class="container">
      <div class="breadcrumb">
        <a href="/tools/">å·¥å…·</a>
        <span class="breadcrumb-separator">/</span>
        <span>NanoBanana</span>
      </div>

      <div id="app" class="nano-banana-app">
        <div class="min-h-screen bg-gradient-to-br from-yellow-200 via-yellow-300 to-orange-200 text-gray-900 relative overflow-hidden rounded-xl border-4 border-black mb-8">
            <!-- é¦™è•‰è£…é¥°å…ƒç´  -->
            <div class="absolute top-10 left-10 text-6xl opacity-20 animate-bounce">ğŸŒ</div>
            <div class="absolute top-32 right-20 text-4xl opacity-30 animate-pulse">ğŸŒ</div>
            <div class="absolute bottom-20 left-32 text-5xl opacity-25 animate-bounce delay-1000">ğŸŒ</div>
            <div class="absolute bottom-40 right-10 text-3xl opacity-20 animate-pulse delay-500">ğŸŒ</div>

            <div class="mx-auto px-3 py-4 relative z-10">
                <!-- Header -->
                <div class="relative mb-6">
                    <div class="bg-gradient-to-r from-orange-400 to-yellow-500 rounded-lg p-6 border-4 border-black shadow-lg">
                        <div class="text-center">
                            <h1 class="text-4xl font-black text-white mb-1 flex items-center justify-center gap-2">
                                ğŸŒ Nano<br />
                                <span class="text-yellow-100 text-5xl">Banana</span>
                            </h1>
                            <p class="text-white text-base font-medium">ä¸Šä¼ ä½ çš„å›¾ç‰‡ï¼Œæˆ‘æ¥åˆ›é€ è‰ºæœ¯ï¼</p>
                        </div>
                    </div>
                </div>

                <!-- APIè®¾ç½®åŒºåŸŸ -->
                <div class="mb-6">
                    <div class="flex justify-center">
                        <button
                            @click="showApiSettings = !showApiSettings"
                            :class="[
                                'px-6 py-3 rounded-lg border-4 border-black font-bold text-sm transition-all flex items-center gap-2 shadow-lg',
                                apiKey ? 'bg-green-400 text-white hover:bg-green-500' : 'bg-red-400 text-white hover:bg-red-500 animate-pulse'
                            ]"
                        >
                            <span>ğŸ”‘</span>
                            <span v-if="!apiKey">éœ€è¦é…ç½®APIå¯†é’¥</span>
                            <span v-else>APIå¯†é’¥å·²é…ç½®</span>
                            <svg :class="['w-4 h-4 transition-transform', showApiSettings ? 'rotate-180' : '']" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                            </svg>
                        </button>
                    </div>

                    <!-- APIè®¾ç½®é¢æ¿ -->
                    <div v-if="showApiSettings" class="mt-4 max-w-2xl mx-auto">
                        <div class="bg-white border-4 border-black rounded-lg p-3 shadow-lg">
                            <div class="mb-2">
                                <h3 class="font-bold text-gray-800 flex items-center gap-2 mb-2">
                                    ğŸ”‘ API é…ç½®
                                    <span v-if="apiKey" class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full">å¯†é’¥å·²ä¿å­˜</span>
                                </h3>
                                <p class="text-sm text-gray-600">å¯è‡ªå®šä¹‰ API å¯†é’¥ä¸ç«¯ç‚¹ï¼Œé»˜è®¤ä½¿ç”¨ OpenRouter</p>
                            </div>

                            <div class="space-y-3">
                                <div>
                                    <label class="block text-xs font-semibold text-gray-600 mb-1">API å¯†é’¥</label>
                                    <div class="flex gap-2">
                                        <input
                                            type="password"
                                            v-model="apiKey"
                                            placeholder="è¾“å…¥ä½ çš„ OpenRouter API å¯†é’¥..."
                                            class="flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"
                                        />
                                        <button
                                            v-if="apiKey"
                                            @click="clearApiKey"
                                            class="px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm"
                                            title="æ¸…é™¤ç¼“å­˜çš„APIå¯†é’¥"
                                        >
                                            ğŸ—‘ï¸
                                        </button>
                                    </div>
                                    <div class="flex items-center justify-between mt-1">
                                        <p class="text-xs text-gray-500">
                                            ä» <a href="https://openrouter.ai/" target="_blank" class="text-orange-500 hover:underline font-medium">OpenRouter.ai</a> è·å–ä½ çš„ API å¯†é’¥
                                        </p>
                                        <p v-if="apiKey" class="text-xs text-green-600 flex items-center gap-1">ğŸ’¾ å·²è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°</p>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-xs font-semibold text-gray-600 mb-1">API ç«¯ç‚¹</label>
                                    <div class="flex gap-2">
                                        <input
                                            type="text"
                                            v-model="apiEndpoint"
                                            placeholder="ä¾‹å¦‚ https://openrouter.ai/api/v1/chat/completions"
                                            class="flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"
                                        />
                                        <button
                                            v-if="apiEndpoint !== 'https://openrouter.ai/api/v1/chat/completions'"
                                            @click="apiEndpoint = 'https://openrouter.ai/api/v1/chat/completions'"
                                            class="px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm"
                                            title="æ¢å¤é»˜è®¤ç«¯ç‚¹"
                                        >
                                            â™»ï¸
                                        </button>
                                    </div>
                                </div>

                                <div>
                                    <div class="flex flex-col gap-2 sm:flex-row sm:items-center">
                                        <button
                                            @click="handleFetchModels"
                                            :disabled="!apiKey || isFetchingModels"
                                            :class="[
                                                'px-3 py-2 rounded-lg border-2 border-black font-semibold text-sm transition-colors shadow-sm flex items-center justify-center gap-2',
                                                isFetchingModels
                                                    ? 'bg-gray-300 text-gray-600 cursor-wait'
                                                    : apiKey
                                                      ? 'bg-purple-500 text-white hover:bg-purple-600'
                                                      : 'bg-gray-200 text-gray-500 cursor-not-allowed'
                                            ]"
                                        >
                                            <span v-if="isFetchingModels">â³ æ­£åœ¨è·å–...</span>
                                            <span v-else>ğŸ“¥ è·å–æ¨¡å‹åˆ—è¡¨</span>
                                        </button>
                                        <span v-if="modelOptions.length" class="text-xs text-gray-600">å·²è½½å…¥ {{ modelOptions.length }} ä¸ªæ¨¡å‹</span>
                                    </div>
                                    <p v-if="modelsError" class="text-xs text-red-600 mt-2">âš ï¸ {{ modelsError }}</p>

                                    <div class="mt-3">
                                        <label class="block text-xs font-semibold text-gray-600 mb-1">é€‰æ‹©æ–‡ç”Ÿå›¾æ¨¡å‹</label>
                                        <select
                                            v-model="selectedModel"
                                            class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"
                                        >
                                            <option v-for="item in modelOptions" :key="item.id" :value="item.id">
                                                {{ item.supportsImages ? 'ğŸ–¼ï¸ ' : '' }}{{ item.label }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- åŠŸèƒ½å¸ƒå±€ -->
                <div class="grid lg:grid-cols-2 gap-4 lg:gap-6 mb-6 lg:items-start">
                    <!-- çµæ„Ÿå·¥åŠ -->
                    <div class="flex flex-col h-full gap-4">
                        <div class="flex flex-col h-full">
                            <div class="bg-gradient-to-r from-blue-400 to-purple-500 text-white font-bold px-4 py-2 rounded-t-lg border-4 border-black border-b-0 flex items-center gap-2">
                                âœ¨ æ–‡ç”Ÿå›¾ Â· çµæ„Ÿå·¥åŠ
                            </div>
                            <div class="bg-white border-4 border-black border-t-0 rounded-b-lg p-5 shadow-lg flex flex-col h-full gap-4">
                                <div class="flex flex-col gap-3 flex-1">
                                    <label class="font-bold flex items-center gap-2 text-base">ğŸŒ è¾“å…¥ä½ çš„åˆ›æ„æè¿°ï¼š</label>
                                    <textarea
                                        v-model="textToImagePrompt"
                                        placeholder="ä¾‹å¦‚ï¼šé˜³å…‰æ´’åœ¨é¦™è•‰å½¢çƒ­æ°”çƒä¸Šï¼Œæ¼‚æµ®åœ¨ç³–æœè‰²çš„å¤©ç©ºä¸­"
                                        class="w-full px-4 py-3 border-2 border-black rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent min-h-[160px] flex-1"
                                    ></textarea>
                                </div>

                                <p class="text-sm text-gray-600 font-medium flex items-center gap-2">
                                    <span>ğŸ’¡</span>
                                    <span>å¡«å†™æè¿°åï¼Œä½¿ç”¨ä¸‹æ–¹æŒ‰é’®å¼€å§‹åˆ›ä½œï¼Œç”Ÿæˆçš„å›¾ç‰‡ä¼šå±•ç¤ºåœ¨ä¸‹æ–¹ç»“æœåŒºã€‚</span>
                                </p>
                            </div>
                        </div>

                        <!-- å®½é«˜æ¯”é€‰æ‹©å™¨ -->
                        <div v-if="showAspectRatioSelector" class="flex flex-col">
                            <div class="bg-gradient-to-r from-purple-400 to-pink-500 text-white font-bold px-4 py-2 rounded-t-lg border-4 border-black border-b-0 flex items-center gap-2">
                                ğŸ“ å›¾åƒå®½é«˜æ¯”
                            </div>
                            <div class="bg-white border-4 border-black border-t-0 rounded-b-lg p-4 shadow-lg">
                                <select
                                    v-model="selectedAspectRatio"
                                    class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm font-medium"
                                >
                                    <option v-for="option in aspectRatioOptions" :key="option.value" :value="option.value">
                                        {{ option.label }}
                                    </option>
                                </select>
                            </div>
                        </div>

                        <!-- Gemini 3 Pro Image é…ç½® -->
                        <div v-if="showGemini3ProConfig" class="flex flex-col">
                            <div class="bg-gradient-to-r from-indigo-400 to-purple-500 text-white font-bold px-4 py-2 rounded-t-lg border-4 border-black border-b-0 flex items-center gap-2">
                                ğŸš€ Gemini 3 Pro Image é…ç½®
                            </div>
                            <div class="bg-white border-4 border-black border-t-0 rounded-b-lg p-4 shadow-lg space-y-4">
                                <div>
                                    <label class="block text-sm font-bold text-gray-800 mb-2">ğŸ“ å›¾åƒå°ºå¯¸</label>
                                    <select v-model="gemini3ImageSize" class="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm font-medium">
                                        <option value="1K">1K - æ ‡å‡†æ¸…æ™°åº¦</option>
                                        <option value="2K">2K - é«˜æ¸…æ™°åº¦</option>
                                        <option value="4K">4K - è¶…é«˜æ¸…æ™°åº¦</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="flex items-center gap-3 cursor-pointer">
                                        <input type="checkbox" v-model="gemini3EnableGoogleSearch" class="w-4 h-4 text-purple-600 border-2 border-gray-300 rounded" />
                                        <span class="text-sm font-bold text-gray-800">ğŸ” å¯ç”¨è°·æ­Œæœç´¢</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- å›¾æ–‡ç”Ÿå›¾æµç¨‹ -->
                    <div class="flex flex-col gap-4 h-full">
                        <div class="flex flex-col h-full">
                            <div class="bg-pink-400 text-white font-bold px-4 py-2 rounded-t-lg border-4 border-black border-b-0 flex items-center gap-2">ğŸŒ å›¾æ–‡ç”Ÿå›¾ Â· ä¸Šä¼ å›¾ç‰‡</div>
                            <div class="bg-white border-4 border-black border-t-0 rounded-b-lg p-4 shadow-lg h-full flex flex-col min-h-[200px]">
                                <div
                                    @click="$refs.fileInput.click()"
                                    @dragover.prevent="isDragOver = true"
                                    @dragleave.prevent="isDragOver = false"
                                    @drop.prevent="handleDrop"
                                    :class="['border-4 border-dashed rounded-lg p-6 text-center cursor-pointer transition-all duration-300 flex-1 flex flex-col justify-center', isDragOver ? 'border-pink-400 bg-pink-50' : 'border-gray-300 bg-gray-50 hover:border-pink-400 hover:bg-pink-50']"
                                >
                                    <input ref="fileInput" type="file" accept="image/*" multiple class="hidden" @change="handleFileSelect" />
                                    <div class="mb-4">
                                        <div class="w-12 h-12 bg-black rounded-lg mx-auto flex items-center justify-center">
                                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" /></svg>
                                        </div>
                                    </div>
                                    <h3 class="text-lg font-bold mb-2">æ‹–æ‹½ä¸Šä¼ </h3>
                                    <p class="text-sm text-gray-500">æ”¯æŒå¤šå¼ å›¾ç‰‡ (æœ€å¤§ 5MB)</p>
                                </div>
                                <div v-if="selectedImages.length > 0" class="grid grid-cols-4 gap-3 mt-4">
                                    <div v-for="(thumbnail, index) in selectedImages" :key="index" class="relative aspect-square bg-gray-100 rounded-lg overflow-hidden group border-2 border-black">
                                        <img :src="thumbnail" class="w-full h-full object-cover" />
                                        <button @click="removeThumbnail(index)" class="absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-sm font-bold opacity-0 group-hover:opacity-100 transition-opacity">Ã—</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-col h-full">
                            <div class="bg-gradient-to-r from-green-400 to-blue-500 text-white font-bold px-4 py-2 rounded-t-lg border-4 border-black border-b-0 flex items-center gap-2">
                                ğŸ¨ å›¾æ–‡ç”Ÿå›¾ Â· é€‰æ‹©é£æ ¼æˆ–è‡ªå®šä¹‰æç¤ºè¯
                            </div>
                            <div class="bg-white border-4 border-black border-t-0 rounded-b-lg p-4 shadow-lg h-full flex flex-col">
                                <div class="flex mb-4 bg-gray-100 rounded-lg p-1 border-2 border-black">
                                    <button @click="activeStyleTab = 'style'" :class="['flex-1 py-2 px-3 rounded-md font-bold transition-all', activeStyleTab === 'style' ? 'bg-yellow-300 text-black' : 'text-gray-600']">ğŸ¨ é¢„è®¾é£æ ¼</button>
                                    <button @click="activeStyleTab = 'custom'" :class="['flex-1 py-2 px-3 rounded-md font-bold transition-all', activeStyleTab === 'custom' ? 'bg-yellow-300 text-black' : 'text-gray-600']">âœï¸ è‡ªå®šä¹‰</button>
                                </div>
                                <div v-if="activeStyleTab === 'style'" class="space-y-2 flex-1 overflow-y-auto max-h-[300px]">
                                    <div v-for="template in styleTemplates" :key="template.id" @click="selectStyle(template)" :class="['p-4 rounded-lg border-2 border-black cursor-pointer transition-all', selectedStyle === template.id ? 'bg-yellow-300 border-orange-500' : 'bg-yellow-50 hover:bg-yellow-100']">
                                        <div class="flex items-start gap-3">
                                            <img :src="template.image" class="w-20 h-20 rounded border-2 border-black object-cover flex-shrink-0" />
                                            <div class="flex-1">
                                                <div class="text-base font-bold mb-1">{{ template.title }}</div>
                                                <p class="text-sm text-gray-600">{{ template.description }}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div v-else class="flex flex-col gap-3 flex-1">
                                    <textarea v-model="customPrompt" placeholder="ä¾‹å¦‚ï¼šå°†å›¾ç‰‡è½¬æ¢ä¸ºè¶…ç°å®ä¸»ä¹‰é£æ ¼..." class="w-full px-4 py-3 border-2 border-black rounded-lg resize-none min-h-[160px]"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ç”ŸæˆæŒ‰é’® -->
                <div class="mb-6">
                    <div class="flex flex-col gap-4 lg:flex-row lg:gap-6">
                        <button
                            @click="handleTextToImageGenerate"
                            :disabled="!canGenerateTextImage"
                            :class="[
                                'flex-1 px-6 py-4 rounded-lg font-bold text-white text-lg transition-all duration-200 flex items-center justify-center gap-3 border-4 border-black shadow-lg',
                                canGenerateTextImage
                                    ? 'bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 hover:-translate-y-1 hover:shadow-xl'
                                    : 'bg-gray-400 cursor-not-allowed'
                            ]"
                        >
                            <span v-if="!isTextToImageLoading" class="flex items-center gap-2 text-xl">ğŸŒ æ–½å±•é­”æ³•ï¼ˆæ–‡ç”Ÿå›¾ï¼‰</span>
                            <span v-else class="flex items-center gap-2 text-xl">ğŸŒ æ­£åœ¨æ–½æ³•...</span>
                            <div v-if="isTextToImageLoading" class="w-8 h-8 border-3 border-white/30 border-t-white rounded-full animate-spin"></div>
                        </button>
                        <button
                            @click="handleGenerate"
                            :disabled="!canGenerate"
                            :class="[
                                'flex-1 px-6 py-4 rounded-lg font-bold text-white text-lg transition-all duration-200 flex items-center justify-center gap-3 border-4 border-black shadow-lg',
                                canGenerate
                                    ? 'bg-gradient-to-r from-orange-400 to-yellow-500 hover:from-orange-500 hover:to-yellow-600 hover:-translate-y-1 hover:shadow-xl'
                                    : 'bg-gray-400 cursor-not-allowed'
                            ]"
                        >
                            <span v-if="!isLoading" class="flex items-center gap-2 text-xl">ğŸŒ æ–½å±•é­”æ³•ï¼ˆå›¾æ–‡ç”Ÿå›¾ï¼‰</span>
                            <span v-else class="flex items-center gap-2 text-xl">ğŸŒ æ­£åœ¨æ–½æ³•...</span>
                            <div v-if="isLoading" class="w-8 h-8 border-3 border-white/30 border-t-white rounded-full animate-spin"></div>
                        </button>
                    </div>
                </div>

                <!-- ç”Ÿæˆç»“æœåŒºåŸŸ -->
                <div class="w-full">
                    <div class="bg-black text-white font-bold px-4 py-2 rounded-t-lg border-4 border-black border-b-0 flex items-center gap-2">âœ¨ ç”Ÿæˆç»“æœ</div>
                    <div class="bg-white border-4 border-black rounded-b-lg p-4 shadow-lg min-h-[400px] flex flex-col">
                        <div class="flex-1 bg-gray-50 border-2 border-black rounded-lg p-6 flex items-center justify-center">
                            <!-- Loading State -->
                            <div v-if="displayLoading" class="text-center">
                                <div class="w-12 h-12 border-4 border-yellow-300 border-t-orange-500 rounded-full animate-spin mx-auto mb-4"></div>
                                <p class="font-bold text-base">ğŸŒ æ­£åœ¨åˆ›é€ é­”æ³•...</p>
                            </div>

                            <!-- Error State -->
                            <div v-else-if="displayError" class="text-center">
                                <div class="text-red-500 text-6xl mb-4">ğŸŒğŸ’¥</div>
                                <p class="text-red-600 font-bold">{{ displayError }}</p>
                            </div>

                            <!-- Result Images -->
                            <div v-else-if="displayResults.length > 0" class="w-full">
                                <div :class="['grid gap-4', displayResults.length === 1 ? 'grid-cols-1' : 'grid-cols-2']">
                                    <div v-for="(img, index) in displayResults" :key="index" class="relative group">
                                        <img :src="img" class="w-full rounded-lg border-2 border-black shadow-lg object-contain" />
                                        <div class="absolute bottom-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                            <button @click="pushImageToUpload(img)" class="px-3 py-1 bg-green-300 text-black font-bold border-2 border-black rounded-lg shadow-lg hover:bg-green-400 text-sm">ğŸ¨ äºŒæ¬¡åˆ›ä½œ</button>
                                            <button @click="handleDownloadResult(img)" class="px-3 py-1 bg-yellow-300 text-black font-bold border-2 border-black rounded-lg shadow-lg hover:bg-yellow-400 text-sm">â¬‡ï¸ ä¸‹è½½</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Empty State -->
                            <div v-else class="text-center">
                                <div class="w-12 h-12 border-4 border-gray-300 rounded-lg mx-auto mb-4 flex items-center justify-center"><span class="text-2xl">ğŸŒ</span></div>
                                <h3 class="font-bold text-base mb-2">ç­‰å¾…é­”æ³•å¼€å§‹...</h3>
                                <p class="text-gray-600">è¾“å…¥æƒ³æ³•æˆ–ä¸Šä¼ å›¾ç‰‡å¼€å§‹åˆ›ä½œ</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <footer class="mt-12 text-center text-gray-600 font-bold">
                    <p>ğŸŒ NanoBanana &copy; 2026 Crafted with Passion</p>
                </footer>
            </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2026 é‚“å®‰è‰¯. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="/assets/js/theme-switcher.js"></script>
  <script src="/assets/js/i18n.js"></script>
  <script src="/assets/js/main.js"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>

  <script>
    const { createApp, ref, computed, onMounted, watch } = Vue;

    const DEFAULT_API_ENDPOINT = 'https://openrouter.ai/api/v1/chat/completions';
    const DEFAULT_MODEL_ID = 'google/gemini-2.0-flash-exp:free';

    const styleTemplates = [
      {
        id: 'figurine',
        title: 'ğŸŒ æ¡Œé¢æ‰‹åŠé£æ ¼',
        prompt: 'Using the nano-banana model,create a 1/7 scale commercialized figurine of the characters in the picture, in a realistic style, in a real environment. The figurine is placed on a computer desk. The figurine has a round transparent acrylic base, with no text on the base. The content on the computer screen is the Zbrush modeling process of this figurine. Next to the computer screen is a BANDAI-style toy packaging box printed with the original artwork., The packaging features two-dimensional flat illustrations.Maintain consistency with the image',
        image: '/assets/images/tools/nano-banana/1.png',
        description: 'å°†ä½ çš„è§’è‰²å˜æˆç²¾ç¾çš„æ”¶è—æ‰‹åŠï¼Œé…æœ‰ä¸“ä¸šåŒ…è£…å’Œåˆ¶ä½œè¿‡ç¨‹å±•ç¤º'
      },
      {
        id: 'fastfood-solitude',
        title: 'ğŸ” æ·±å¤œé£Ÿå ‚çš„å­¤å¯‚',
        prompt: 'A cinematic scene inside a fast food restaurant at night. Foreground: a lonely table with burgers and fries, and a smartphone shown large and sharp on the table, clearly displaying the uploaded anime/game character image. A hand is reaching for food, symbolizing solitude. Midground: in the blurred background, a couple is sitting together and kiss. One of them is represented as a cosplayer version of the uploaded character. The other person is an ordinary japan human, and they are showing intimate affection. Background: large glass windows, blurred neon city lights outside. Mood: melancholic, bittersweet, ironic, cinematic shallow depth of field. Image size is 585px 1024px',
        image: '/assets/images/tools/nano-banana/2.png',
        description: 'åœ¨æ·±å¤œçš„å¿«é¤åº—ï¼Œå°†ä½ çš„è§’è‰²èå…¥å……æ»¡æ•…äº‹æ„Ÿçš„å­¤å¯‚ä¸ç”œèœœå¯¹æ¯”åœºæ™¯ä¸­'
      },
      {
        id: 'contact-sheet',
        title: 'ğŸ¬ ç”µå½±å°æ ·é£æ ¼',
        prompt: '(æŒ‡ä»¤) åˆ†æè¾“å…¥å›¾åƒçš„æ•´ä¸ªæ„å›¾ã€‚è¯†åˆ«æ‰€æœ‰å­˜åœ¨çš„å…³é”®ä¸»ä½“ï¼ˆæ— è®ºæ˜¯å•äººã€ç¾¤ä½“/æƒ…ä¾£ã€è½¦è¾†è¿˜æ˜¯ç‰¹å®šç‰©ä½“ï¼‰åŠå…¶ç©ºé—´å…³ç³»/äº’åŠ¨ã€‚ ç”Ÿæˆä¸€ä¸ªè¿è´¯çš„ 3x3 ç½‘æ ¼â€œç”µå½±å°æ ·ï¼ˆContact Sheetï¼‰â€ï¼Œå±•ç¤ºåœ¨åŒä¸€ç¯å¢ƒä¸­å®Œå…¨æ˜¯è¿™äº›ä¸»ä½“çš„ 9 ä¸ªä¸åŒé•œå¤´ã€‚ ä½ å¿…é¡»è°ƒæ•´æ ‡å‡†çš„ç”µå½±é•œå¤´ç±»å‹ä»¥é€‚åº”å†…å®¹ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœæ˜¯ç¾¤ä½“ï¼Œä¿æŒç¾¤ä½“åœ¨ä¸€èµ·ï¼›å¦‚æœæ˜¯ç‰©ä½“ï¼Œæ„å›¾åŒ…å«æ•´ä¸ªç‰©ä½“ï¼‰ï¼š ç¬¬ 1 è¡Œï¼ˆå»ºç«‹èƒŒæ™¯ï¼‰ï¼š å¤§è¿œæ™¯ (ELS)ï¼š ä¸»ä½“åœ¨å¹¿é˜”çš„ç¯å¢ƒä¸­æ˜¾å¾—å¾ˆå°ã€‚ å…¨æ™¯ (LS)ï¼š å®Œæ•´çš„ä¸»ä½“æˆ–ç¾¤ä½“ä»ä¸Šåˆ°ä¸‹å¯è§ï¼ˆä»å¤´åˆ°è„š / ä»è½¦è½®åˆ°è½¦é¡¶ï¼‰ã€‚ ä¸­è¿œæ™¯ (ç¾å¼é•œå¤´/å››åˆ†ä¹‹ä¸‰)ï¼š æ„å›¾ä»è†ç›–ä»¥ä¸Šï¼ˆé’ˆå¯¹äººç‰©ï¼‰æˆ– 3/4 è§†è§’ï¼ˆé’ˆå¯¹ç‰©ä½“ï¼‰ã€‚ ç¬¬ 2 è¡Œï¼ˆæ ¸å¿ƒè¦†ç›–ï¼‰ï¼š 4. ä¸­æ™¯ (MS)ï¼š æ„å›¾ä»è…°éƒ¨ä»¥ä¸Šï¼ˆæˆ–ç‰©ä½“çš„ä¸­å¿ƒæ ¸å¿ƒï¼‰ã€‚èšç„¦äºäº’åŠ¨/åŠ¨ä½œã€‚ 5. ä¸­ç‰¹å†™ (MCU)ï¼š æ„å›¾ä»èƒ¸éƒ¨ä»¥ä¸Šã€‚ä¸»è¦ä¸»ä½“çš„äº²å¯†æ„å›¾ã€‚ 6. ç‰¹å†™ (CU)ï¼š ç´§å‡‘æ„å›¾äºè„¸éƒ¨æˆ–ç‰©ä½“çš„â€œæ­£é¢â€ã€‚ ç¬¬ 3 è¡Œï¼ˆç»†èŠ‚ä¸è§’åº¦ï¼‰ï¼š 7. å¤§ç‰¹å†™ (ECU)ï¼š å¼ºçƒˆèšç„¦äºå…³é”®ç‰¹å¾ï¼ˆçœ¼ç›ã€æ‰‹ã€æ ‡å¿—ã€çº¹ç†ï¼‰çš„å¾®è·ç»†èŠ‚ã€‚ 8. ä½è§’åº¦é•œå¤´ (ä»°è§†/è™«çœ¼)ï¼š ä»åœ°é¢ä»°æœ›ä¸»ä½“ï¼ˆå£®è§‚/è‹±é›„æ„Ÿï¼‰ã€‚ 9. é«˜è§’åº¦é•œå¤´ (ä¿¯è§†/é¸Ÿç°)ï¼š ä»ä¸Šæ–¹ä¿¯ç°ä¸»ä½“ã€‚ ç¡®ä¿ä¸¥æ ¼çš„ä¸€è‡´æ€§ï¼šæ‰€æœ‰ 9 ä¸ªé¢æ¿ä¸­æ˜¯ç›¸åŒçš„äººç‰©/ç‰©ä½“ã€ç›¸åŒçš„è¡£æœå’Œç›¸åŒçš„å…‰ç…§ã€‚æ™¯æ·±åº”é€¼çœŸåœ°å˜åŒ–ï¼ˆç‰¹å†™é•œå¤´ä¸­çš„èƒŒæ™¯è™šåŒ–ï¼‰ã€‚ ä¸€ä¸ªåŒ…å« 9 ä¸ªé¢æ¿çš„ä¸“ä¸š 3x3 ç”µå½±æ•…äº‹æ¿ç½‘æ ¼ã€‚ è¯¥ç½‘æ ¼ä»¥å…¨é¢çš„ç„¦è·èŒƒå›´å±•ç¤ºè¾“å…¥å›¾åƒä¸­çš„ç‰¹å®šä¸»ä½“/åœºæ™¯ã€‚ é¡¶è¡Œï¼š å®½å¹¿ç¯å¢ƒé•œå¤´ï¼Œå…¨è§†å›¾ï¼Œ3/4 å‰ªè¾‘ï¼ˆè†ä¸Šæ™¯ï¼‰ã€‚ ä¸­é—´è¡Œï¼š è…°éƒ¨ä»¥ä¸Šè§†å›¾ï¼Œèƒ¸éƒ¨ä»¥ä¸Šè§†å›¾ï¼Œè„¸éƒ¨/æ­£é¢ç‰¹å†™ã€‚ åº•è¡Œï¼š å¾®è·ç»†èŠ‚ï¼Œä½è§’åº¦ï¼Œé«˜è§’åº¦ã€‚ æ‰€æœ‰å¸§å‡å…·æœ‰ç…§ç‰‡èˆ¬é€¼çœŸçš„çº¹ç†ï¼Œä¸€è‡´çš„ç”µå½±çº§è°ƒè‰²ï¼Œä»¥åŠé’ˆå¯¹æ‰€åˆ†æçš„ä¸»ä½“æˆ–ç‰©ä½“ç‰¹å®šæ•°é‡çš„æ­£ç¡®æ„å›¾ã€‚',
        image: '/assets/images/tools/nano-banana/3.jpg',
        description: 'ç”ŸæˆåŒ…å«9ä¸ªé•œå¤´çš„ä¸“ä¸šç”µå½±æ•…äº‹æ¿ç½‘æ ¼ï¼Œæ¶µç›–å…¨æ™¯ã€ç‰¹å†™åŠå¤šç§è§’åº¦'
      }
    ];

    createApp({
      setup() {
        const apiKey = ref(localStorage.getItem('nano-banana-api-key') || '');
        const apiEndpoint = ref(localStorage.getItem('nano-banana-api-endpoint') || DEFAULT_API_ENDPOINT);
        const selectedModel = ref(localStorage.getItem('nano-banana-model-id') || DEFAULT_MODEL_ID);
        const modelOptions = ref(JSON.parse(localStorage.getItem('nano-banana-model-cache') || '[]'));

        const showApiSettings = ref(!apiKey.value);
        const isFetchingModels = ref(false);
        const modelsError = ref(null);

        const selectedImages = ref([]);
        const isDragOver = ref(false);
        const activeStyleTab = ref('style');
        const selectedStyle = ref('');
        const customPrompt = ref('');

        const textToImagePrompt = ref('');
        const textToImageResult = ref([]);
        const textToImageError = ref(null);
        const isTextToImageLoading = ref(false);

        const result = ref([]);
        const error = ref(null);
        const isLoading = ref(false);
        const latestResultSource = ref(null);

        const selectedAspectRatio = ref('1:1');
        const gemini3ImageSize = ref('2K');
        const gemini3EnableGoogleSearch = ref(false);

        const aspectRatioOptions = [
            { value: '1:1', label: '1:1 - 1024x1024' },
            { value: '2:3', label: '2:3 - 832x1248' },
            { value: '3:2', label: '3:2 - 1248x832' },
            { value: '3:4', label: '3:4 - 864x1184' },
            { value: '4:3', label: '4:3 - 1184x864' },
            { value: '4:5', label: '4:5 - 896x1152' },
            { value: '5:4', label: '5:4 - 1152x896' },
            { value: '9:16', label: '9:16 - 768x1344' },
            { value: '16:9', label: '16:9 - 1344x768' },
            { value: '21:9', label: '21:9 - 1536x672' }
        ];

        watch(apiKey, val => localStorage.setItem('nano-banana-api-key', val));
        watch(apiEndpoint, val => localStorage.setItem('nano-banana-api-endpoint', val));
        watch(selectedModel, val => localStorage.setItem('nano-banana-model-id', val));

        const clearApiKey = () => {
          apiKey.value = '';
          localStorage.removeItem('nano-banana-api-key');
        };

        const handleFetchModels = async () => {
          if (!apiKey.value) return;
          isFetchingModels.value = true;
          modelsError.value = null;
          try {
            const endpoint = apiEndpoint.value.replace(/\/chat\/completions$/, '/models');
            const response = await fetch(endpoint, {
              headers: { 'Authorization': `Bearer ${apiKey.value}` }
            });
            const data = await response.json();
            const models = data.data || data.models || [];
            modelOptions.value = models.map(m => ({
              id: m.id,
              label: m.name || m.id,
              supportsImages: /image|vision|flux|art/i.test(m.id)
            })).sort((a, b) => (b.supportsImages - a.supportsImages));
            localStorage.setItem('nano-banana-model-cache', JSON.stringify(modelOptions.value));
          } catch (err) {
            modelsError.value = 'è·å–æ¨¡å‹å¤±è´¥: ' + err.message;
          } finally {
            isFetchingModels.value = false;
          }
        };

        const handleFileSelect = (e) => {
          const files = Array.from(e.target.files);
          files.forEach(file => {
            const reader = new FileReader();
            reader.onload = ev => selectedImages.value.push(ev.target.result);
            reader.readAsDataURL(file);
          });
        };

        const handleDrop = (e) => {
          isDragOver.value = false;
          const files = Array.from(e.dataTransfer.files);
          files.forEach(file => {
            const reader = new FileReader();
            reader.onload = ev => selectedImages.value.push(ev.target.result);
            reader.readAsDataURL(file);
          });
        };

        const removeThumbnail = (index) => selectedImages.value.splice(index, 1);

        const selectStyle = (template) => {
          selectedStyle.value = template.id;
          customPrompt.value = '';
          activeStyleTab.value = 'style';
        };

        const showAspectRatioSelector = computed(() => {
            const id = selectedModel.value.toLowerCase();
            return id.includes('gemini-2.5-flash-image') || id.includes('gemini-3-pro-image');
        });

        const showGemini3ProConfig = computed(() => selectedModel.value.toLowerCase().includes('gemini-3-pro-image'));

        const canGenerateTextImage = computed(() => apiKey.value && textToImagePrompt.value && !isTextToImageLoading.value);
        const canGenerate = computed(() => apiKey.value && selectedImages.value.length > 0 && (selectedStyle.value || customPrompt.value) && !isLoading.value);

        const generateImage = async (prompt, images) => {
          const isGemini3 = selectedModel.value.toLowerCase().includes('gemini-3-pro-image');
          const payload = {
            model: selectedModel.value,
            messages: [{
              role: 'user',
              content: images.length === 0 ? prompt : [
                { type: 'text', text: prompt },
                ...images.map(url => ({ type: 'image_url', image_url: { url } }))
              ]
            }],
            modalities: ['image', 'text']
          };

          const imageConfig = {};
          if (showAspectRatioSelector.value) imageConfig.aspect_ratio = selectedAspectRatio.value;
          if (isGemini3) {
              imageConfig.image_size = gemini3ImageSize.value;
              if (gemini3EnableGoogleSearch.value) payload.tools = [{ google_search: {} }];
          }
          if (Object.keys(imageConfig).length > 0) payload.image_config = imageConfig;

          const response = await fetch(apiEndpoint.value, {
            method: 'POST',
            headers: {
              'Authorization': `Bearer ${apiKey.value}`,
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(payload)
          });

          if (!response.ok) throw new Error(await response.text());
          const data = await response.json();
          const message = data.choices[0].message;
          let urls = [];
          if (Array.isArray(message.images)) urls = message.images.map(img => img.image_url.url);
          else if (typeof message.content === 'string' && message.content.startsWith('data:image/')) {
            const matches = message.content.match(/data:image\/[a-zA-Z0-9+]+;base64,[^\s"]+/g);
            urls = matches || [message.content];
          }
          if (urls.length === 0) throw new Error('æ¨¡å‹æœªè¿”å›å›¾ç‰‡');
          return urls;
        };

        const handleTextToImageGenerate = async () => {
          isTextToImageLoading.value = true;
          textToImageError.value = null;
          latestResultSource.value = 'text';
          try {
            textToImageResult.value = await generateImage(textToImagePrompt.value, []);
          } catch (err) {
            textToImageError.value = err.message;
          } finally {
            isTextToImageLoading.value = false;
          }
        };

        const handleGenerate = async () => {
          isLoading.value = true;
          error.value = null;
          latestResultSource.value = 'image';
          try {
            const prompt = selectedStyle.value ? styleTemplates.find(t => t.id === selectedStyle.value).prompt : customPrompt.value;
            result.value = await generateImage(prompt, selectedImages.value);
          } catch (err) {
            error.value = err.message;
          } finally {
            isLoading.value = false;
          }
        };

        const displayLoading = computed(() => latestResultSource.value === 'text' ? isTextToImageLoading.value : isLoading.value);
        const displayResults = computed(() => latestResultSource.value === 'text' ? textToImageResult.value : result.value);
        const displayError = computed(() => latestResultSource.value === 'text' ? textToImageError.value : error.value);

        const pushImageToUpload = (img) => {
          if (!selectedImages.value.includes(img)) selectedImages.value.push(img);
        };

        const handleDownloadResult = (img) => {
          const link = document.createElement('a');
          link.href = img;
          link.download = `nanobanana-${Date.now()}.png`;
          link.click();
        };

        return {
          apiKey, apiEndpoint, selectedModel, modelOptions, showApiSettings, isFetchingModels, modelsError,
          selectedImages, isDragOver, activeStyleTab, selectedStyle, customPrompt, styleTemplates,
          textToImagePrompt, textToImageResult, textToImageError, isTextToImageLoading,
          result, error, isLoading, latestResultSource,
          selectedAspectRatio, gemini3ImageSize, gemini3EnableGoogleSearch,
          aspectRatioOptions, showAspectRatioSelector, showGemini3ProConfig,
          canGenerateTextImage, canGenerate, displayLoading, displayResults, displayError,
          clearApiKey, handleFetchModels, handleFileSelect, handleDrop, removeThumbnail, selectStyle,
          handleTextToImageGenerate, handleGenerate, pushImageToUpload, handleDownloadResult
        };
      }
    }).mount('#app');
  </script>
</body>
</html>
